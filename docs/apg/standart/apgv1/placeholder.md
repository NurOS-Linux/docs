# APG v1 (Legacy) ‚Äî –û–±–∑–æ—Ä

:::warning –£—Å—Ç–∞—Ä–µ–≤—à–∞—è –≤–µ—Ä—Å–∏—è
APG v1 —è–≤–ª—è–µ—Ç—Å—è —É—Å—Ç–∞—Ä–µ–≤—à–µ–π –≤–µ—Ä—Å–∏–µ–π —Ñ–æ—Ä–º–∞—Ç–∞. –†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å [APG v2](../apgv2/obzor.md).
:::

## –û –≤–µ—Ä—Å–∏–∏

**APG v1** –±—ã–ª–∞ –ø–µ—Ä–≤–æ–π –≤–µ—Ä—Å–∏–µ–π —Ñ–æ—Ä–º–∞—Ç–∞ –ø–∞–∫–µ—Ç–æ–≤ –¥–ª—è NurOS, —Ä–∞–∑—Ä–∞–±–æ—Ç–∞–Ω–Ω–æ–π –≤ 2023-2024 –≥–æ–¥–∞—Ö. –≠—Ç–æ –ø—Ä–æ—Å—Ç–æ–π –∏ –ø–æ–Ω—è—Ç–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç, –æ—Å–Ω–æ–≤–∞–Ω–Ω—ã–π –Ω–∞ tar-–∞—Ä—Ö–∏–≤–∞—Ö —Å –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–º–∏ –≤ JSON.

### –û—Å–Ω–æ–≤–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è

* **–î–∞—Ç–∞ —Å–æ–∑–¥–∞–Ω–∏—è**: –î–µ–∫–∞–±—Ä—å 2023
* **–°—Ç–∞—Ç—É—Å**: Legacy (—É—Å—Ç–∞—Ä–µ–≤—à–∏–π)
* **–ü–æ–¥–¥–µ—Ä–∂–∫–∞**: –î–ª—è –æ–±—Ä–∞—Ç–Ω–æ–π —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏
* **–§–æ—Ä–º–∞—Ç –∞—Ä—Ö–∏–≤–∞**: tar.xz, tar.gz
* **–†–∞—Å—à–∏—Ä–µ–Ω–∏–µ**: .apg

## –•–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏ APGv1

### –ü—Ä–æ—Å—Ç–æ—Ç–∞

APGv1 –±—ã–ª —Ä–∞–∑—Ä–∞–±–æ—Ç–∞–Ω —Å –∞–∫—Ü–µ–Ω—Ç–æ–º –Ω–∞ –ø—Ä–æ—Å—Ç–æ—Ç—É:

* –ú–∏–Ω–∏–º—É–º –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã—Ö –ø–æ–ª–µ–π –≤ metadata.json
* –ü–æ–Ω—è—Ç–Ω–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–π
* –°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–µ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã (tar, md5sum)
* –õ–µ–≥–∫–æ —Å–æ–∑–¥–∞–≤–∞—Ç—å –≤—Ä—É—á–Ω—É—é

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞

```
package.apg (tar.xz –∞—Ä—Ö–∏–≤)
‚îú‚îÄ‚îÄ metadata.json      # JSON —Å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π –æ –ø–∞–∫–µ—Ç–µ
‚îú‚îÄ‚îÄ md5sums            # MD5 –∫–æ–Ω—Ç—Ä–æ–ª—å–Ω—ã–µ —Å—É–º–º—ã
‚îú‚îÄ‚îÄ data/              # –§–∞–π–ª—ã –¥–ª—è —É—Å—Ç–∞–Ω–æ–≤–∫–∏ –≤ /
‚îú‚îÄ‚îÄ scripts/           # –°–∫—Ä–∏–ø—Ç—ã —É—Å—Ç–∞–Ω–æ–≤–∫–∏ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
‚îî‚îÄ‚îÄ home/              # –§–∞–π–ª—ã –¥–ª—è $HOME (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
```

### –ú–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ

**–ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–π metadata.json:**
```json
{
    "name": "package-name",
    "version": "1.0.0"
}
```

**–ü–æ–ª–Ω—ã–π metadata.json:**
```json
{
    "name": "package-name",
    "version": "1.0.0",
    "architecture": "x86_64",
    "description": "Package description",
    "maintainer": "Name <email>",
    "license": "MIT",
    "homepage": "https://example.com",
    "dependencies": ["dep1", "dep2"],
    "conflicts": [],
    "provides": [],
    "replaces": []
}
```

## –û—Å–Ω–æ–≤–Ω—ã–µ –æ—Ç–ª–∏—á–∏—è –æ—Ç APGv2

| –•–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∞ | APGv1 | APGv2 |
|----------------|-------|-------|
| **–°—Ç—Ä—É–∫—Ç—É—Ä–∞ metadata** | –ü–ª–æ—Å–∫–∞—è | –í–ª–æ–∂–µ–Ω–Ω–∞—è (`package` –æ–±—ä–µ–∫—Ç) |
| **–û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –ø–æ–ª—è** | `name`, `version` | + `release` |
| **–ö–æ–Ω—Ç—Ä–æ–ª—å–Ω—ã–µ —Å—É–º–º—ã** | –¢–æ–ª—å–∫–æ MD5 | MD5 –∏–ª–∏ CRC32 |
| **–ü–æ–ª–µ release** | ‚ùå –û—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç | ‚úÖ –û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ–µ |
| **–ü–æ–ª–µ build_date** | ‚ùå –û—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç | ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ |
| **–ü–æ–ª–µ install_size** | ‚ùå –û—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç | ‚úÖ –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ–µ |
| **–û–ø–µ—Ä–∞—Ç–æ—Ä—ã –≤–µ—Ä—Å–∏–π** | –£–∫–∞–∑—ã–≤–∞—é—Ç—Å—è, –Ω–æ –Ω–µ —Ä–∞–±–æ—Ç–∞—é—Ç | ‚úÖ –ü–æ–ª–Ω–∞—è –ø–æ–¥–¥–µ—Ä–∂–∫–∞ |
| **RISC-V –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞** | `risc_v` | `riscv64` |
| **–ü–æ–¥–¥–µ—Ä–∂–∫–∞ —Ç–µ–≥–æ–≤** | ‚úÖ –ï—Å—Ç—å | ‚úÖ –£–ª—É—á—à–µ–Ω–∞ |

## –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è APGv1

### 1. –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏

```json
"dependencies": ["package >= 1.0.0"]
```

‚ùå –û–ø–µ—Ä–∞—Ç–æ—Ä—ã –≤–µ—Ä—Å–∏–π (`>=`, `<=`, `>`, `<`, `=`) **–Ω–µ –ø—Ä–æ–≤–µ—Ä—è—é—Ç—Å—è**
‚úÖ –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞—é—Ç—Å—è, –Ω–æ –±–µ–∑ –ø—Ä–æ–≤–µ—Ä–∫–∏ –≤–µ—Ä—Å–∏–π

### 2. –ö–æ–Ω—Ç—Ä–æ–ª—å–Ω—ã–µ —Å—É–º–º—ã

‚úÖ –¢–æ–ª—å–∫–æ MD5 (—Ñ–∞–π–ª `md5sums`)
‚ùå –ù–µ—Ç –ø–æ–¥–¥–µ—Ä–∂–∫–∏ CRC32
‚ùå –ú–µ–¥–ª–µ–Ω–Ω–µ–µ –¥–ª—è –±–æ–ª—å—à–∏—Ö —Ñ–∞–π–ª–æ–≤

### 3. –ú–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ

‚ùå –û—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Ä–µ–ª–∏–∑–µ
‚ùå –ù–µ—Ç –¥–∞—Ç—ã —Å–±–æ—Ä–∫–∏
‚ùå –ù–µ—Ç –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ —Ä–∞–∑–º–µ—Ä–µ —É—Å—Ç–∞–Ω–æ–≤–∫–∏

### 4. –°–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å

‚ö†Ô∏è –°—Ç–∞—Ä—ã–µ –≤–µ—Ä—Å–∏–∏ Tulpar
‚ö†Ô∏è –ú–æ–∂–µ—Ç –Ω–µ —Ä–∞–±–æ—Ç–∞—Ç—å —Å –Ω–æ–≤—ã–º–∏ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞–º–∏

## –ú–∏–≥—Ä–∞—Ü–∏—è –Ω–∞ APGv2

### –ó–∞—á–µ–º –º–∏–≥—Ä–∏—Ä–æ–≤–∞—Ç—å?

‚úÖ –ü–æ–ª–Ω–∞—è –ø–æ–¥–¥–µ—Ä–∂–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
‚úÖ –ë—ã—Å—Ç—Ä—ã–µ CRC32 –∫–æ–Ω—Ç—Ä–æ–ª—å–Ω—ã–µ —Å—É–º–º—ã
‚úÖ –ë–æ–ª—å—à–µ –º–µ—Ç–∞–¥–∞–Ω–Ω—ã—Ö
‚úÖ –õ—É—á—à–∞—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å —Å –Ω–æ–≤—ã–º–∏ –≤–µ—Ä—Å–∏—è–º–∏ Tulpar
‚úÖ –†–∞—Å—à–∏—Ä—è–µ–º–æ—Å—Ç—å —Ñ–æ—Ä–º–∞—Ç–∞

### –ü—Ä–æ—Ü–µ—Å—Å –º–∏–≥—Ä–∞—Ü–∏–∏

1. **–û–±–Ω–æ–≤–∏—Ç—å metadata.json**
   - –î–æ–±–∞–≤–∏—Ç—å –ø–æ–ª–µ `release`
   - –û–±–µ—Ä–Ω—É—Ç—å –≤ –æ–±—ä–µ–∫—Ç `package`
   - –ò–∑–º–µ–Ω–∏—Ç—å `risc_v` –Ω–∞ `riscv64`

2. **–ó–∞–º–µ–Ω–∏—Ç—å –∫–æ–Ω—Ç—Ä–æ–ª—å–Ω—ã–µ —Å—É–º–º—ã**
   ```bash
   apgbuild sums data crc32sums
   rm md5sums
   ```

3. **–ü–µ—Ä–µ—Å–æ–±—Ä–∞—Ç—å –ø–∞–∫–µ—Ç**
   ```bash
   apgbuild build .
   ```

## –ü—Ä–∏–º–µ—Ä—ã –ø–∞–∫–µ—Ç–æ–≤

### –û—Ñ–∏—Ü–∏–∞–ª—å–Ω—ã–π –ø—Ä–∏–º–µ—Ä APGv1

–ü–æ–ª–Ω—ã–π —Ä–∞–±–æ—á–∏–π –ø—Ä–∏–º–µ—Ä –ø–∞–∫–µ—Ç–∞ –≤ —Ñ–æ—Ä–º–∞—Ç–µ APGv1:

üì¶ **–†–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π**: https://github.com/NurOS-Linux/APGexample
üåø **–í–µ—Ç–∫–∞ APGv1**: https://github.com/NurOS-Linux/APGexample/tree/APGv1

```bash
# –°–∫–∞—á–∞—Ç—å –ø—Ä–∏–º–µ—Ä
git clone -b APGv1 https://github.com/NurOS-Linux/APGexample
cd APGexample

# –ò–∑—É—á–∏—Ç—å —Å—Ç—Ä—É–∫—Ç—É—Ä—É
tree
cat metadata.json
cat md5sums
```

### –î–ª—è —Å—Ä–∞–≤–Ω–µ–Ω–∏—è: APGv2

üì¶ **APGv2 –ø—Ä–∏–º–µ—Ä** (main –≤–µ—Ç–∫–∞): https://github.com/NurOS-Linux/APGexample

```bash
# –°–∫–∞—á–∞—Ç—å APGv2 –ø—Ä–∏–º–µ—Ä
git clone https://github.com/NurOS-Linux/APGexample
cd APGexample
```

## –ü–æ–¥–¥–µ—Ä–∂–∫–∞

### –¢–µ–∫—É—â–∏–π —Å—Ç–∞—Ç—É—Å

- ‚ö†Ô∏è **–£—Å—Ç–∞—Ä–µ–≤—à–∏–π —Ñ–æ—Ä–º–∞—Ç** (Legacy)
- ‚úÖ **–ü–æ–¥–¥–µ—Ä–∂–∫–∞ –¥–ª—è –æ–±—Ä–∞—Ç–Ω–æ–π —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏**
- ‚ùå **–ù–æ–≤—ã–µ –ø–∞–∫–µ—Ç—ã –¥–æ–ª–∂–Ω—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å APGv2**
- ‚úÖ **–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –¥–æ—Å—Ç—É–ø–Ω–∞**

### –ß—Ç–æ –¥–µ–ª–∞—Ç—å?

**–ï—Å–ª–∏ —É –≤–∞—Å –µ—Å—Ç—å –ø–∞–∫–µ—Ç—ã APGv1:**
1. –û–Ω–∏ –ø—Ä–æ–¥–æ–ª–∂–∞—Ç —Ä–∞–±–æ—Ç–∞—Ç—å (–æ–±—Ä–∞—Ç–Ω–∞—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å)
2. –†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –º–∏–≥—Ä–∏—Ä–æ–≤–∞—Ç—å –Ω–∞ APGv2
3. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã –º–∏–≥—Ä–∞—Ü–∏–∏

**–ï—Å–ª–∏ —Å–æ–∑–¥–∞–µ—Ç–µ –Ω–æ–≤—ã–π –ø–∞–∫–µ—Ç:**
1. ‚úÖ –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ APGv2
2. ‚ùå –ù–µ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ APGv1
3. –°–ª–µ–¥—É–π—Ç–µ —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–º —Å—Ç–∞–Ω–¥–∞—Ä—Ç–∞–º

## –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è APGv1

–î–æ—Å—Ç—É–ø–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è:

* [–°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø–∞–∫–µ—Ç–∞ APGv1](./struktura-paketa.md) ‚Äî –ø–æ–ª–Ω–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ —Ñ–æ—Ä–º–∞—Ç–∞
* [–§–∞–π–ª metadata.json](./fail-metadata.json.md) ‚Äî –≤—Å–µ –ø–æ–ª—è –∏ –ø—Ä–∏–º–µ—Ä—ã
* [–û—Ñ–∏—Ü–∏–∞–ª—å–Ω—ã–π –ø—Ä–∏–º–µ—Ä](https://github.com/NurOS-Linux/APGexample/tree/APGv1) ‚Äî —Ä–∞–±–æ—á–∏–π –ø—Ä–∏–º–µ—Ä –ø–∞–∫–µ—Ç–∞

## –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è

* [–û–±–∑–æ—Ä APGv2](../apgv2/obzor.md) ‚Äî —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç
* [–ò—Å—Ç–æ—Ä–∏—è –ø—Ä–æ–µ–∫—Ç–∞](/blog/year-2025-results) ‚Äî –∏—Ç–æ–≥–∏ 2025 –≥–æ–¥–∞
